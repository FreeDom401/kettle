var sy=sy||{};$.extend($.fn.panel.defaults,{loadingMessage:"\u52a0\u8f7d\u4e2d...."});$.extend($.fn.datagrid.defaults,{loadMsg:"\u6570\u636e\u52a0\u8f7d\u4e2d...."});$.extend($.fn.panel.defaults,{onBeforeDestroy:function(){var a=$("iframe",this);try{if(0<a.length){for(var d=0;d<a.length;d++)a[d].src="",a[d].contentWindow.document.write(""),a[d].contentWindow.close();a.remove();if(0<navigator.userAgent.indexOf("MSIE"))try{CollectGarbage()}catch(c){}}}catch(c){}}});sy.onMove={onMove:function(a,d){var c=a,f=d;1>c&&(c=1);1>f&&(f=1);var e=parseInt($(this).parent().css("width"))+14,b=parseInt($(this).parent().css("height"))+14,h=c+e,k=f+b,g=$(window).width(),l=$(window).height();h>g&&(c=g-e);k>l&&(f=l-b);$(this).parent().css({left:c,top:f})}};$.extend($.fn.dialog.defaults,sy.onMove);$.extend($.fn.window.defaults,sy.onMove);$.extend($.fn.panel.defaults,sy.onMove);sy.onLoadError={onLoadError:function(a){parent.$&&parent.$.messager?(parent.$.messager.progress("close"),parent.$.messager.alert("\u9519\u8bef",a.responseText)):($.messager.progress("close"),$.messager.alert("\u9519\u8bef",a.responseText))}};$.extend($.fn.datagrid.defaults,sy.onLoadError);$.extend($.fn.treegrid.defaults,sy.onLoadError);$.extend($.fn.tree.defaults,sy.onLoadError);$.extend($.fn.combogrid.defaults,sy.onLoadError);$.extend($.fn.combobox.defaults,sy.onLoadError);$.extend($.fn.form.defaults,sy.onLoadError);$.extend($.fn.combobox.defaults,{onHidePanel:function(){var a=$(this).combobox("options");if("remote"==a.mode){for(var d=$(this).combobox("getData"),c=$(this).combobox("getValue"),f=!1,e=0;e<d.length;e++)d[e][a.valueField]==c&&(f=!0);f||$(this).combobox("setValue","")}}});$.extend($.fn.combogrid.defaults,{onHidePanel:function(){var a=$(this).combogrid("options");if("remote"==a.mode){for(var d=$(this).combogrid("grid").datagrid("getData").rows,c=$(this).combogrid("getValue"),f=!1,e=0;e<d.length;e++)d[e][a.idField]==c&&(f=!0);f||$(this).combogrid("setValue","")}}});$.extend($.fn.validatebox.defaults.rules,{eqPwd:{validator:function(a,d){return a==$(d[0]).val()},message:"\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01"}});sy.loadFilter={loadFilter:function(a,d){var c=$(this).data().tree.options,f,e;if(c.parentField){f=c.idField||"id";e=c.textField||"text";var c=c.parentField||"pid",b,h,k=[],g=[];b=0;for(h=a.length;b<h;b++)g[a[b][f]]=a[b];b=0;for(h=a.length;b<h;b++)g[a[b][c]]&&a[b][f]!=a[b][c]?(g[a[b][c]].children||(g[a[b][c]].children=[]),a[b].text=a[b][e],g[a[b][c]].children.push(a[b])):(a[b].text=a[b][e],k.push(a[b]));return k}return a}};$.extend($.fn.combotree.defaults,sy.loadFilter);$.extend($.fn.tree.defaults,sy.loadFilter);$.extend($.fn.treegrid.defaults,{loadFilter:function(a,d){var c=$(this).data().treegrid.options,f,e;if(c.parentField){f=c.idField||"id";e=c.textField||"text";var c=c.parentField||"pid",b,h,k=[],g=[];b=0;for(h=a.length;b<h;b++)g[a[b][f]]=a[b];b=0;for(h=a.length;b<h;b++)g[a[b][c]]&&a[b][f]!=a[b][c]?(g[a[b][c]].children||(g[a[b][c]].children=[]),a[b].text=a[b][e],g[a[b][c]].children.push(a[b])):(a[b].text=a[b][e],k.push(a[b]));return k}return a}});sy.modalDialog=function(a,d,c){void 0==d&&(d=640);void 0==c&&(c=600);d=$.extend({title:"\x26nbsp;",width:d,height:c,modal:!0,resizable:!0,collapsible:!0,maximizable:!0,onClose:function(){$(this).dialog("destroy")}},a);d.modal=!0;a.url&&(d.content='\x3ciframe id\x3d"" src\x3d"'+a.url+'" allowTransparency\x3d"true" scrolling\x3d"auto" width\x3d"100%" height\x3d"98%" frameBorder\x3d"0" name\x3d""\x3e\x3c/iframe\x3e');return $("\x3cdiv/\x3e").dialog(d)};$.extend($.fn.form.methods,{loadData:function(a,d){function c(a,c){function b(c){var b=$(a);b.find("input[name],select[name],textarea[name]").each(function(){var a=this.name,f=jQuery.proxy(function(){try{return eval("this."+a)}catch(b){return""}},c)();if(!d(a,f).length){var e=b.find('input[numberboxName\x3d"'+a+'"]');e.length?e.numberbox("setValue",f):($('input[name\x3d"'+a+'"]',b).val(f),$('textarea[name\x3d"'+a+'"]',b).val(f),$('select[name\x3d"'+a+'"]',b).val(f))}k(a,f)});g.onLoadSuccess.call(a,c);$(a).form("validate")}function d(b,c){var e=$(a).find('input[name\x3d"'+b+'"][type\x3dradio], input[name\x3d"'+b+'"][type\x3dcheckbox]');e._propAttr("checked",!1);e.each(function(){var a=$(this);(a.val()==String(c)||0<=$.inArray(a.val(),c))&&a._propAttr("checked",!0)});return e}function k(b,c){var d="combobox combotree combogrid datetimebox datebox combo".split(" "),e=$(a).find('[comboName\x3d"'+b+'"]');if(e.length)for(var g=0;g<d.length;g++){var h=d[g];if(e.hasClass(h+"-f")){if(e[h]("options").multiple)e[h]("setValues",c);else e[h]("setValue",c);break}}}$.data(a,"form")||$.data(a,"form",{options:$.extend({},$.fn.form.defaults)});var g=$.data(a,"form").options;if("string"==typeof c){var l={};0!=g.onBeforeLoad.call(a,l)&&$.ajax({url:c,data:l,dataType:"json",success:function(a){b(a)},error:function(){g.onLoadError.apply(a,arguments)}})}else b(c)}return a.each(function(){c(this,d)})}});sy.changeTheme=function(a){var d=$("#easyuiTheme"),c=d.attr("href"),c=c.substring(0,c.indexOf("themes"))+"themes/"+a+"/easyui.css";d.attr("href",c);d=$("iframe");if(0<d.length)for(var f=0;f<d.length;f++){var e=d[f];try{$(e).contents().find("#easyuiTheme").attr("href",c)}catch(b){try{e.contentWindow.document.getElementById("easyuiTheme").href=c}catch(h){}}}sy.cookie("easyuiTheme",a,{expires:7})};sy.progressBar=function(a){if("string"==typeof a)"close"==a&&$("#syProgressBarDiv").dialog("destroy");else{if(1>$("#syProgressBarDiv").length){var d=$.extend({title:"\x26nbsp;",closable:!1,width:300,height:60,modal:!0,content:'\x3cdiv id\x3d"syProgressBar" class\x3d"easyui-progressbar" data-options\x3d"value:0"\x3e\x3c/div\x3e'},a);$('\x3cdiv id\x3d"syProgressBarDiv"/\x3e').dialog(d);$.parser.parse("#syProgressBarDiv")}else $("#syProgressBarDiv").dialog("open");a.value&&$("#syProgressBar").progressbar("setValue",a.value)}};