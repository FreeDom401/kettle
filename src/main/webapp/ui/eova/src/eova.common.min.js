(function(c){c.extend({extendPrototype:function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},getHtmlOptions:function(a){var b=void 0;(a=a.$dom.data("options"))&&(b=eval("({"+a+"})"));return b},eovaInit:function(a,b,e,d){var f=[];a.each(function(){var a=c.data(this,e);a||(a=new b(this,d),c.data(this,e,a));f.push(a)});return 1==f.length?f[0]:f},tipwarn:function(a,b){var e=a.tooltip({position:"bottom",deltaY:-6,showEvent:null,hideEvent:"mousemove",content:'\x3cspan\x3e\x3cspan class\x3d"pd5 icon-exclamation"\x3e\x26nbsp;\x3c/span\x3e'+b+"\x3c/span\x3e",onShow:function(){c(this).tooltip("tip").css({border:"1px solid transparent","background-color":"#fffcef","border-color":"#ffbb76",color:"#db7c22"})}}).tooltip("show");setTimeout(function(){e.tooltip("destroy")},3E3);return e},validation:function(a,b){if(!b.isValid){var e=c.tipwarn(c(b.element).parent(),b.msg);c(b.element).keydown(function(b){e.tooltip("destroy");c(this).unbind("keydown")})}},slideMsg:function(a,b){var e=c;b&&(e=b);e.messager.show({title:"\u64cd\u4f5c\u63d0\u793a",msg:a,timeout:1500,showType:"slide"})},alert:function(a,b){b&&null!=b&&""!=b||(b="\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01");b.startsWith("info")?(b=b.replace("info:",""),a.messager.alert("\u63d0\u793a",b,"info")):b.startsWith("warn")?(b=b.replace("warn:",""),a.messager.alert("\u8b66\u544a",b,"warning")):(b.startsWith("error")&&(b=b.replace("error:","")),a.messager.alert("\u9519\u8bef",b,"error"))},gridToExcel:function(){var a=function(b,a){return b.replace(/{(\w+)}/g,function(b,c){return a[c]})};return function(b,c){for(var d="\x3ctr\x3e",f=b.datagrid("getColumnFields"),h=0;h<f.length;h++){var g=f[h];console.log(g);"ck"!=g&&((g=b.datagrid("getColumnOption",g).title)||(g=""),d=d+"\x3ctd\x3e"+g+"\x3c/td\x3e")}for(var d=d+"\x3c/tr\x3e",l=b.datagrid("getRows"),k=0;k<l.length;k++){var m=l[k];console.log(m);d+="\x3ctr\x3e";for(h=0;h<f.length;h++)g=f[h],"ck"!=g&&(d=d+"\x3ctd\x3e"+m[g]+"\x3c/td\x3e");d+="\x3c/tr\x3e"}f=window.location;d=a('\x3chtml xmlns:o\x3d"urn:schemas-microsoft-com:office:office" xmlns:x\x3d"urn:schemas-microsoft-com:office:excel" xmlns\x3d"http://www.w3.org/TR/REC-html40"\x3e\x3chead\x3e\x3c!--[if gte mso 9]\x3e\x3cxml\x3e\x3cx:ExcelWorkbook\x3e\x3cx:ExcelWorksheets\x3e\x3cx:ExcelWorksheet\x3e\x3cx:Name\x3e{worksheet}\x3c/x:Name\x3e\x3cx:WorksheetOptions\x3e\x3cx:DisplayGridlines/\x3e\x3c/x:WorksheetOptions\x3e\x3c/x:ExcelWorksheet\x3e\x3c/x:ExcelWorksheets\x3e\x3c/x:ExcelWorkbook\x3e\x3c/xml\x3e\x3c![endif]--\x3e\x3c/head\x3e\x3cbody\x3e\x3ctable\x3e{table}\x3c/table\x3e\x3c/body\x3e\x3c/html\x3e',{worksheet:c||"Worksheet",table:d});d=window.btoa(unescape(encodeURIComponent(d)));f.href="data:application/vnd.ms-excel;base64,"+d}}(),clipStr:function(a,b){for(var c="",d=0;d<a.length;d++)if(c+=a.charAt(d),d+1==b)return c+"...";return c}});c.extend(c.fn.datagrid.defaults.editors,{eovatext:{init:function(a,b){var e=c('\x3cdiv class\x3d"eova-text" name\x3d"'+b.name+'"\x3e\x3c/div\x3e').appendTo(a);e.eovatext(b);return e},getValue:function(a){return c(a).eovatext().getValue()},setValue:function(a,b){c(a).eovatext().setValue(b)},resize:function(a,b){c(a).eovatext().setWidth(b)}},eovatime:{init:function(a,b){var e=c('\x3cdiv class\x3d"eova-time"\x3e\x3c/div\x3e').appendTo(a);e.eovatime(b);return e},getValue:function(a){return c(a).eovatime().getValue()},setValue:function(a,b){c(a).eovatime().setValue(b)},resize:function(a,b){c(a).eovatime().setWidth(b)}},eovacombo:{init:function(a,b){var e=c('\x3cdiv class\x3d"eova-combo"\x3e\x3c/div\x3e').appendTo(a);e.eovacombo(b);return e},destroy:function(a){c(a).eovacombo().destroy()},getText:function(a){return c(a).eovacombo().getText()},getValue:function(a){return c(a).eovacombo().getValue()},setValue:function(a,b){var e=[];b&&""!=b&&(e=-1==b.indexOf(",")?[b]:b.split(","));c(a).eovacombo().setTexts(e)},resize:function(a,b){c(a).eovacombo().setWidth(b)}},eovafind:{init:function(a,b){var e=c('\x3cdiv class\x3d"eova-find"\x3e\x3c/div\x3e').appendTo(a);e.eovafind(b);return e},getText:function(a){return c(a).eovafind().getText()},getValue:function(a){return c(a).eovafind().getValue()},setValue:function(a,b){c(a).eovafind().setText(b)},resize:function(a,b){c(a).eovafind().setWidth(b)}},eovacheck:{init:function(a,b){var e=c('\x3cdiv class\x3d"eova-check"\x3e\x3c/div\x3e').appendTo(a);e.eovacheck(b);return e},getValue:function(a){return c(a).eovacheck().getChecked()},setValue:function(a,b){c(a).eovacheck().setChecked(b)},resize:function(a,b){}}});c.extend(c.fn.datagrid.methods,{editCell:function(a,b){return a.each(function(){c(this).datagrid("options");for(var a=c(this).datagrid("getColumnFields",!0).concat(c(this).datagrid("getColumnFields")),d=0;d<a.length;d++){var f=c(this).datagrid("getColumnOption",a[d]);f.editor1=f.editor;a[d]!=b.field&&(f.editor=null)}c(this).datagrid("beginEdit",b.index);(d=c(this).datagrid("getEditor",b))&&(c(d.target).hasClass("textbox-f")?c(d.target).textbox("textbox").focus():c(d.target).focus());for(d=0;d<a.length;d++)f=c(this).datagrid("getColumnOption",a[d]),f.editor=f.editor1})},enableCellEditing:function(a){return a.each(function(){var b=c(this),a=b.datagrid("options");a.oldOnClickCell=a.onClickCell;a.onClickCell=function(d,f){if(void 0!=a.editIndex)if(b.datagrid("validateRow",a.editIndex)){if(!c("#"+a.id).parent().isValid())return;b.datagrid("endEdit",a.editIndex);a.editIndex=void 0}else return;b.datagrid("selectRow",d).datagrid("editCell",{index:d,field:f});a.editIndex=d;a.oldOnClickCell.call(this,d,f)}})}});c.fn.mask=function(){1!=c(this).data("mask")&&(c(this).wrap('\x3cspan style\x3d"position: relative"\x3e\x3c/span\x3e'),c(this).parent().append('\x3cdiv class\x3d"divMask" style\x3d"position: absolute; width: 100%; height: 22px; left: 0px; top: -3px; background: #DADADA; opacity: 0.5; filter: alpha(opacity\x3d0)"\x3e \x3c/div\x3e'),c(this).data("mask",1))};c.fn.unmask=function(){1==c(this).data("mask")&&(c(this).parent().find(".divMask").remove(),c(this).unwrap(),c(this).data("mask",0))}})(jQuery);